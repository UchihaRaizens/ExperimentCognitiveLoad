var mathTest = [
  {
    level: 1,
    data:[
      {
        id:1,
        math_example: '1 + 1 + 0 + 1 + 1 = ?',
        math_options:[1,2,3,4],
        correct: 4
      },
       {
        id:2,
        math_example: '0 + 1 + 1 + 1 + 0 = ?',
        math_options:[4,2,3,1],
        correct: 3
      },
       {
        id:3,
        math_example: '1 + 0 + 1 + 0 + 1 = ?',
        math_options:[2,1,4,3],
        correct: 3
      },
       {
        id:4,
        math_example: '1 + 0 + 1 + 0 + 1 = ?',
        math_options:[2,1,4,3],
        correct: 3
      },
       {
        id:5,
        math_example: '1 + 0 + 1 + 0 + 1 = ?',
        math_options:[2,1,4,3],
        correct: 3
      },
       {
        id:6,
        math_example: '1 + 0 + 1 + 0 + 1 = ?',
        math_options:[2,1,4,3],
        correct: 3
      },
       {
        id:7,
        math_example: '1 + 0 + 1 + 0 + 1 = ?',
        math_options:[2,1,4,3],
        correct: 3
      },
       {
        id:8,
        math_example: '1 + 0 + 1 + 0 + 1 = ?',
        math_options:[2,1,4,3],
        correct: 3
      },
       {
        id:9,
        math_example: '1 + 0 + 1 + 0 + 1 = ?',
        math_options:[2,1,4,3],
        correct: 3
      },
       {
        id:10,
        math_example: 'pos?',
        math_options:[2,1,4,3],
        correct: 3
      }
    ]
  },
  {
    level: 2,
    data:[
      {
        id:1,
        math_example: '1 + 2 + 3 + 4 + 5 = ?',
        math_options:[1,2,3,4],
        correct: 4
      },
       {
        id:2,
        math_example: '1 + 2 + 3 + 4 + 5 = ?',
        math_options:[4,2,3,1],
        correct: 3
      },
       {
        id:3,
        math_example: '1 + 2 + 3 + 4 + 5 = ?',
        math_options:[2,1,4,3],
        correct: 3
      },
       {
        id:4,
        math_example: '1 + 2 + 3 + 4 + 5 = ?',
        math_options:[2,1,4,3],
        correct: 3
      },
       {
        id:5,
        math_example: '1 + 2 + 3 + 4 + 5 = ?',
        math_options:[2,1,4,3],
        correct: 3
      },
       {
        id:6,
        math_example: '1 + 2 + 3 + 4 + 5 = ?',
        math_options:[2,1,4,3],
        correct: 3
      },
       {
        id:7,
        math_example: '1 + 2 + 3 + 4 + 5 = ?',
        math_options:[2,1,4,3],
        correct: 3
      },
       {
        id:8,
        math_example: '1 + 2 + 3 + 4 + 5 = ?',
        math_options:[2,1,4,3],
        correct: 3
      },
       {
        id:9,
        math_example: '1 + 2 + 3 + 4 + 5 = ?',
        math_options:[2,1,4,3],
        correct: 3
      },
       {
        id:10,
        math_example: '1 + 2 + 3 + 4 + 5 = ?',
        math_options:[2,1,4,3],
        correct: 3
      }
    ]
  },
  {
    level: 3,
    data:[
      {
        id:1,
        math_example: '1 + 3 + 5 + 8 + 10 = ?',
        math_options:[1,2,3,4],
        correct: 4
      },
       {
        id:2,
        math_example: '1 + 3 + 5 + 8 + 10 = ?',
        math_options:[4,2,3,1],
        correct: 3
      },
       {
        id:3,
        math_example: '1 + 3 + 5 + 8 + 10 = ?',
        math_options:[2,1,4,3],
        correct: 3
      },
       {
        id:4,
        math_example: '1 + 3 + 5 + 8 + 10 = ?',
        math_options:[2,1,4,3],
        correct: 3
      },
       {
        id:5,
        math_example: '1 + 3 + 5 + 8 + 10 = ?',
        math_options:[2,1,4,3],
        correct: 3
      },
       {
        id:6,
        math_example: '1 + 3 + 5 + 8 + 10 = ?',
        math_options:[2,1,4,3],
        correct: 3
      },
       {
        id:7,
        math_example: '1 + 3 + 5 + 8 + 10 = ?',
        math_options:[2,1,4,3],
        correct: 3
      },
       {
        id:8,
        math_example: '1 + 3 + 5 + 8 + 10 = ?',
        math_options:[2,1,4,3],
        correct: 3
      },
       {
        id:9,
        math_example: '1 + 3 + 5 + 8 + 10 = ?',
        math_options:[2,1,4,3],
        correct: 3
      },
       {
        id:10,
        math_example: '1 + 3 + 5 + 8 + 10 = ?',
        math_options:[2,1,4,3],
        correct: 3
      }
    ]
  },
  {
    level: 4,
    data:[
      {
        id:1,
        math_example: '5 + 10 + 15 + 13 + 1 = ?',
        math_options:[1,2,3,4],
        correct: 4
      },
       {
        id:2,
        math_example: '5 + 10 + 15 + 13 + 1 = ?',
        math_options:[4,2,3,1],
        correct: 3
      },
       {
        id:3,
        math_example: '5 + 10 + 15 + 13 + 1 = ?',
        math_options:[2,1,4,3],
        correct: 3
      },
       {
        id:4,
        math_example: '5 + 10 + 15 + 13 + 1 = ?',
        math_options:[2,1,4,3],
        correct: 3
      },
       {
        id:5,
        math_example: '5 + 10 + 15 + 13 + 1 = ?',
        math_options:[2,1,4,3],
        correct: 3
      },
       {
        id:6,
        math_example: '5 + 10 + 15 + 13 + 1 = ?',
        math_options:[2,1,4,3],
        correct: 3
      },
       {
        id:7,
        math_example: '5 + 10 + 15 + 13 + 1 = ?',
        math_options:[2,1,4,3],
        correct: 3
      },
       {
        id:8,
        math_example: '5 + 10 + 15 + 13 + 1 = ?',
        math_options:[2,1,4,3],
        correct: 3
      },
       {
        id:9,
        math_example: '5 + 10 + 15 + 13 + 1 = ?',
        math_options:[2,1,4,3],
        correct: 3
      },
       {
        id:10,
        math_example: '5 + 10 + 15 + 13 + 1 = ?',
        math_options:[2,1,4,3],
        correct: 3
      }
    ]
  },
  {
    level: 5,
    data:[
      {
        id:1,
        math_example: '100 + 1 + 0 + 1 + 1 = ?',
        math_options:[1,2,3,4],
        correct: 4
      },
       {
        id:2,
        math_example: '100 + 1 + 0 + 1 + 1 = ?',
        math_options:[4,2,3,1],
        correct: 3
      },
       {
        id:3,
        math_example: '100 + 1 + 0 + 1 + 1 = ?',
        math_options:[2,1,4,3],
        correct: 3
      },
       {
        id:4,
        math_example: '100 + 1 + 0 + 1 + 1 = ?',
        math_options:[2,1,4,3],
        correct: 3
      },
       {
        id:5,
        math_example: '100 + 1 + 0 + 1 + 1 = ?',
        math_options:[2,1,4,3],
        correct: 3
      },
       {
        id:6,
        math_example: '100 + 1 + 0 + 1 + 1 = ?',
        math_options:[2,1,4,3],
        correct: 3
      },
       {
        id:7,
        math_example: '100 + 1 + 0 + 1 + 1 = ?',
        math_options:[2,1,4,3],
        correct: 3
      },
       {
        id:8,
        math_example: '100 + 1 + 0 + 1 + 1 = ?',
        math_options:[2,1,4,3],
        correct: 3
      },
       {
        id:9,
        math_example: '100 + 1 + 0 + 1 + 1 = ?',
        math_options:[2,1,4,3],
        correct: 3
      },
       {
        id:10,
        math_example: '100 + 1 + 0 + 1 + 1 = ?',
        math_options:[2,1,4,3],
        correct: 3
      },
    ]
  }
]

var colorTest = [
  {
    'name_color': ['červená','modrá','zelená','hnedá','čierna'],
    'font_color': ['red','green','blue', 'brown', 'black']
  },
   {
    'name_color': ['zelená','modrá','ružová','hnedá','sivá'],
    'font_color': ['red','blue', 'pink', 'black', 'black']
  },
   {
    'name_color': ['oranžová','červená','čierna','hnedá','žltá'],
    'font_color': ['orange','blue', 'black', 'brown', 'yellow']
  },
   {
    'name_color': ['fialová','modrá','zelená','sivá','červená'],
    'font_color': ['purple','red', 'green', 'grey', 'red']
  },
   {
    'name_color': ['žltá','modrá','fialová','čierna','oranžová'],
    'font_color': ['blue','blue', 'green', 'red', 'green']
  },
];


var startReactionTime;
var level = 0;
var example = 0;
var isReady = 0;
var colorLevel = 0;
var iteration = 0;
var isAnswer = 0;

function runSecondPart() {
  //console.log('startSecondPart');
  //img = randomize(images)[0];
  //document.body.style.backgroundImage = "url('screens/" + img + "')";

  var word = mathTest[level];
  var color = colorTest[iteration];

  document.getElementById('math_example').innerHTML = word.data[example].math_example;
  document.getElementById('instruction_2').style.display = "none";
  document.getElementById('options_reaction_time_task').style.display = "none";
  document.getElementById(('math_option_0')).innerHTML = word.data[example].math_options[0];
  document.getElementById(('math_option_1')).innerHTML = word.data[example].math_options[1];
  document.getElementById(('math_option_2')).innerHTML = word.data[example].math_options[2];
  document.getElementById(('math_option_3')).innerHTML = word.data[example].math_options[3];
  document.getElementById('math_options').style.display = "block";
  if(isAnswer == 0) {
    isAnswer = 1;
    sendEvent('math_example_level_' + word.level.toString() + '_id_' + word.data[example].id.toString());
  }

  if(isReady != 1) {
    isReady = 1;
    setTimeout(function() {
         document.getElementById('math_options').style.display = "none";
         document.getElementById('instruction_2').style.display = "block";
         document.getElementById('options_reaction_time_task').style.display = "";

         document.getElementById('math_example').innerHTML = color.name_color[colorLevel];
         document.getElementById('math_example').style.display = "";
         document.getElementById('math_example').style.color = color.font_color[colorLevel];
         startReactionTime = new Date().getTime();
    },3000);
  }
}

function answerReaction(id) {
  var reactionTime = new Date().getTime() - startReactionTime;
   if(id == 0) {
    sendEvent('answer_reaction_disagree_' + reactionTime.toString() +'_'+ colorTest[iteration].name_color[colorLevel] + '_' + colorTest[iteration].font_color[colorLevel]);
  } else {
    sendEvent('answer_reaction_agree_' + reactionTime.toString()+'_' + colorTest[iteration].name_color[colorLevel]  + '_' + colorTest[iteration].font_color[colorLevel]);
  }
  isReady = 0;
  colorLevel += 1;
  document.getElementById('math_example').style.color = 'black';

 
  if(colorLevel == 5) {
    isAnswer = 0;
    level += 1;
    iteration += 1;
    colorLevel = 0;
    example = 0;
  }
  if(iteration != 5) {
    runSecondPart();
  }
  else {
    stopSecondPart();
  }
}

function answerMath(id) {
  isAnswer = 0;
  if (mathTest[level].data[example].correct == mathTest[level].data[example].math_options[id]) {
    sendEvent('OK');
  } else {
    sendEvent('WRONG');
  }
  example += 1;
  if(example == 10) {
   example = 0;
  } 

  
  runSecondPart();
}

function stopSecondPart() {
  setTimeout(function() {
    window.location.href = "endPart2.html";
  }, 1050);
}